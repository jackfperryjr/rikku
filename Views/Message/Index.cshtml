@model IEnumerable<Rikku.Models.ApplicationUserViewModel>
@using Rikku.Models
@using Microsoft.AspNetCore.Identity
@inject SignInManager<ApplicationUser> SignInManager
@inject UserManager<ApplicationUser> UserManager
@{
    var user = await UserManager.GetUserAsync(User);
}
<h3 class="ffapp" style="position:fixed;left:0;background-color:#000000;padding:0 0 5px 40%;width:100vw;background-color: rgba(0,0,0,.9);">messages</h3>
<div class="container" style="padding-top:40px;">
    <div class="container"> 
    @foreach (var users in Model) 
    {
        @if(users.Email != user.Email)
            {
                
                <div class="row" style="margin-bottom:10px;">
                    <div class="col-xs-2" style="margin:0;">
                    @if(users.MessageReadFlg == 0)
                    {
                        <i class="fas fa-circle" style="color:#1e88e5;padding-top:25px;"></i>
                    }
                    @if(users.MessageReadFlg == 1) 
                    {
                        <i class="far fa-circle" style="color:#ffffff;padding-top:25px;"></i>
                    }
                    </div>
                    <div class="col-xs-3" style="margin:0 auto;">
                        <a asp-action="Chat" asp-route-id="@users.Id" style="display:inline;">

                            <img class="user-img-md" src="@users.Picture" style="border-radius:50%;margin-right: 10px;width:70px;height70px;">
                        </a>
                    </div>
                    <div class="col-xs-6" style="margin:0 auto;padding-top:15px">
                        <a asp-action="Chat" asp-route-id="@users.Id" style="display:inline;">
                            <span style="font-size: 16px;">@users.CreateDate.ToShortDateString()</span>
                        </a>
                    </div>
                   
                    <div class="col-xs-2" style="margin:0 auto;padding-top:15px">
                        <a class="btn btn-link bg-danger" style="border-radius:50%;" data-toggle="modal" href="@("#deleteModal" + users.Id)"><i class="fas fa-trash" style="color:#ffffff!important;"></i></a>
                        <div class="modal fade top-margin" id="@("deleteModal" + users.Id)" tabindex="-1" role="dialog">
                            <div class="modal-dialog">
                                <div class="modal-content text-center">
                                    @using(Html.BeginForm("DeleteChat", "Message"))
                                    {
                                    <input type="hidden" value="@users.Id" name="id" />
                                    <div class="modal-header">
                                        <h4 class="modal-title">Confirm</h4>
                                        <button type="button" class="close pull-right" data-dismiss="modal">&times;</button>
                                    </div>
                                    <div class="modal-body" style="background-color:#212121!important;">
                                        <p>Are you sure you want to delete these messages?</p>
                                    </div>
                                    <div class="modal-footer" style="background-color:#212121!important;">
                                        <button type="submit" class="btn btn-danger">Yes</button>
                                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                                    </div>
                                    }
                                </div>
                            </div>
                        </div> 
                    </div>
                </div>
            }
    }
    </div>
</div>